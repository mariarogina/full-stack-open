(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(17),a=n.n(o),i=n(8),s=n(3),u=n(4),d=n.n(u),j=n(0),l=function(e){var t=e.person,n=e.handleRemovePerson;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("li",{children:[t.name," ",t.number,Object(j.jsx)("button",{className:"del_btn",onClick:function(){var e;e=t.name,window.confirm("Want to delete ".concat(e,"?"))&&n(t.id)},children:"Delete"})]})})},b=n(44),h=function(e){var t=e.persons,n=e.handleRemovePerson;return Object(j.jsx)("div",{children:Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)(l,{person:e,handleRemovePerson:n},Object(b.a)())}))})})},f=function(e){var t=e.handleSetSearchString;return Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"text",onChange:function(e){return t(e)}})})},O=function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:function(t){return e.handleSetPersons(t)},children:[Object(j.jsxs)("div",{children:["name:",Object(j.jsx)("input",{type:"text",onChange:function(t){return e.handleSetName(t)},required:!0})]}),Object(j.jsxs)("div",{children:["number:",Object(j.jsx)("input",{type:"text",onChange:function(t){return e.handleSetPhone(t)},required:!0})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var t=e.message,n=e.notifClass;return Object(j.jsx)("div",{className:n,children:Object(j.jsx)("p",{children:t})})},p="/api/notes",x=function(){return d.a.get(p)},v=function(e,t){return d.a.put("".concat(p,"/").concat(e),t)},S=function(e){return d.a.delete("".concat(p,"/").concat(e))},g=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),u=a[0],l=a[1],b=Object(c.useState)(""),p=Object(s.a)(b,2),g=p[0],w=p[1],P=Object(c.useState)(""),k=Object(s.a)(P,2),y=k[0],C=k[1],N=Object(c.useState)([]),D=Object(s.a)(N,2),R=D[0],T=D[1],F=Object(c.useState)(""),q=Object(s.a)(F,2),E=q[0],J=q[1],A=Object(c.useState)(""),B=Object(s.a)(A,2),I=B[0],M=B[1];Object(c.useEffect)((function(){x().then((function(e){console.log("promise fulfilled"),r(e.data),T(e.data)}))}),[]);var W=function(e){e.preventDefault();var t=R.filter((function(e){return e.name.includes(u)}));r(t)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),E.length>0?Object(j.jsx)("p",{children:Object(j.jsx)(m,{notifClass:"error",message:E})}):I.length>0?Object(j.jsx)("p",{children:Object(j.jsx)(m,{notifClass:"success",message:I})}):Object(j.jsx)("p",{}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),r(R),W(e)}(e)},children:[Object(j.jsx)("p",{children:"Filter shown with"}),Object(j.jsx)(f,{handleSetSearchString:function(e){l(e.target.value)}})]}),Object(j.jsx)("h2",{children:"Add a New "}),Object(j.jsx)(O,{handleSetPersons:function(e){e.preventDefault();var t=n.map((function(e){return e.name}));if(n.map((function(e){return e.number})).includes(y))alert("Phone number ".concat(y," is already added to phone book"));else if(t.includes(g)){if(window.confirm("".concat(g," is already added to phone book, want to replace the old number with the new one?"))){var c=n.find((function(e){return e.name===g})),o=Object(i.a)(Object(i.a)({},c),{},{number:y});v(c.id,o).then((function(e){r(n.map((function(t){return t.id!==c.id?t:e.data})))})).catch((function(e){J("Person '".concat(g,"' was already removed from server")),setTimeout((function(){J("")}),5e3)})),M("'".concat(g,"''s telephone has been changed to ").concat(y)),setTimeout((function(){M("")}),5e3)}}else{var a={name:g,number:y};d.a.post("http://localhost:3007/persons",a).then((function(e){r(n.concat(e.data))})).catch((function(e){J("Person '".concat(g,"' was already removed from server")),setTimeout((function(){J("")}),5e3)})),M("".concat(g,"'s telephone has been added to the phone book")),r(n.filter((function(e){return e.name!==g}))),setTimeout((function(){M("")}),3e3)}},handleSetPhone:function(e){C(e.target.value)},handleSetName:function(e){w(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)("div",{children:Object(j.jsx)(h,{persons:n,handleRemovePerson:function(e){S(e).then((function(){return r(n.filter((function(t){return t.id!==e})))}))}})})]})};n(41);a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9c15caff.chunk.js.map