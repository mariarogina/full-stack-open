{"version":3,"sources":["Person.js","PersonList.js","Filter.js","AddNew.js","Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","handleRemovePerson","name","number","className","onClick","window","confirm","id","PersonList","persons","map","uuidv4","Filter","handleSetSearchString","type","onChange","e","AddNew","props","onSubmit","handleSetPersons","handleSetName","required","handleSetPhone","Notification","message","notifClass","baseUrl","axios","get","newObject","put","delete","App","useState","setPersons","searchString","setSearchString","newName","setNewName","newPhone","setNewPhone","initialPersons","setInitialPersons","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","personService","then","response","console","log","data","handleFilterPersonsSearch","preventDefault","filteredPersons","filter","includes","length","handleFilterPersons","target","value","personNames","alert","oldPerson","find","newPerson","catch","error","setTimeout","post","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.de507566.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = ({ person, handleRemovePerson }) => {\r\n  const confirmAndRemove = (name) => {\r\n    const confirmRemoval = window.confirm(`Want to delete ${name}?`);\r\n    if (confirmRemoval) {\r\n      handleRemovePerson(person.id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <li>\r\n        {person.name} {person.number}\r\n        <button\r\n          className=\"del_btn\"\r\n          onClick={() => {\r\n            confirmAndRemove(person.name);\r\n          }}\r\n        >\r\n          Delete\r\n        </button>\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst PersonList = ({ persons, handleRemovePerson }) => {\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {persons.map((person) => {\r\n          return (\r\n            <Person\r\n              person={person}\r\n              handleRemovePerson={handleRemovePerson}\r\n              key={uuidv4()}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonList;\r\n","import React from \"react\";\r\nconst Filter = ({ handleSetSearchString }) => {\r\n  return (\r\n    <div>\r\n      <input type=\"text\" onChange={(e) => handleSetSearchString(e)} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst AddNew = (props) => {\r\n  return (\r\n    <>\r\n      <form onSubmit={(e) => props.handleSetPersons(e)}>\r\n        <div>\r\n          name:\r\n          <input\r\n            type=\"text\"\r\n            onChange={(e) => props.handleSetName(e)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input\r\n            type=\"text\"\r\n            onChange={(e) => props.handleSetPhone(e)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddNew;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, notifClass }) => {\r\n  return (\r\n    <div className={notifClass}>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n//add\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n//edit\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n};\r\n\r\nconst removePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  removePerson: removePerson,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PersonList from \"./PersonList\";\nimport Filter from \"./Filter\";\nimport AddNew from \"./AddNew\";\nimport Notification from \"./Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [searchString, setSearchString] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [initialPersons, setInitialPersons] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      console.log(\"promise fulfilled\");\n      setPersons(response.data);\n      setInitialPersons(response.data);\n    });\n  }, []);\n\n  const handleSetPhone = (e) => {\n    setNewPhone(e.target.value);\n  };\n  const handleSetName = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleSetPersons = (e) => {\n    e.preventDefault();\n    const personNames = persons.map((person) => person.name);\n    const personPhones = persons.map((person) => person.number);\n    if (personPhones.includes(newPhone)) {\n      alert(`Phone number ${newPhone} is already added to phone book`);\n    } else if (personNames.includes(newName)) {\n      const confirmAdd = window.confirm(\n        `${newName} is already added to phone book, want to replace the old number with the new one?`\n      );\n      if (confirmAdd) {\n        const oldPerson = persons.find((person) => person.name === newName);\n        const newPerson = { ...oldPerson, number: newPhone };\n        personService\n          .update(oldPerson.id, newPerson)\n          .then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== oldPerson.id ? person : response.data\n              )\n            );\n          })\n          .catch((error) => {\n            setErrorMessage(\n              `Person '${newName}' was already removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(\"\");\n            }, 5000);\n          });\n        setSuccessMessage(\n          `'${newName}''s telephone has been changed to ${newPhone}`\n        );\n        setTimeout(() => {\n          setSuccessMessage(\"\");\n        }, 5000);\n      }\n    } else {\n      const newPerson = { name: newName, number: newPhone };\n      axios\n        .post(\"http://localhost:3007/persons\", newPerson)\n        .then((response) => {\n          setPersons(persons.concat(response.data));\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Person '${newName}' was already removed from server`\n          );\n          setTimeout(() => {\n            setErrorMessage(\"\");\n          }, 5000);\n        });\n      setSuccessMessage(\n        `${newName}'s telephone has been added to the phone book`\n      );\n      setPersons(persons.filter((person) => person.name !== newName));\n      setTimeout(() => {\n        setSuccessMessage(\"\");\n      }, 3000);\n    }\n  };\n\n  const handleSetSearchString = (e) => {\n    setSearchString(e.target.value);\n  };\n\n  const handleFilterPersons = (e) => {\n    e.preventDefault();\n    setPersons(initialPersons);\n    handleFilterPersonsSearch(e);\n  };\n\n  const handleFilterPersonsSearch = (e) => {\n    e.preventDefault();\n\n    const filteredPersons = initialPersons.filter((person) =>\n      person.name.includes(searchString)\n    );\n    setPersons(filteredPersons);\n  };\n\n  const handleRemovePerson = (id) => {\n    personService\n      .removePerson(id)\n      .then(() => setPersons(persons.filter((person) => person.id !== id)));\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {errorMessage.length > 0 ? (\n        <p>\n          <Notification notifClass=\"error\" message={errorMessage} />\n        </p>\n      ) : successMessage.length > 0 ? (\n        <p>\n          <Notification notifClass=\"success\" message={successMessage} />\n        </p>\n      ) : (\n        <p></p>\n      )}\n\n      <form onSubmit={(e) => handleFilterPersons(e)}>\n        <p>Filter shown with</p>\n        <Filter handleSetSearchString={handleSetSearchString} />\n      </form>\n\n      <h2>Add a New </h2>\n      <AddNew\n        handleSetPersons={handleSetPersons}\n        handleSetPhone={handleSetPhone}\n        handleSetName={handleSetName}\n      />\n      <h2>Numbers</h2>\n      <div>\n        <PersonList persons={persons} handleRemovePerson={handleRemovePerson} />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}