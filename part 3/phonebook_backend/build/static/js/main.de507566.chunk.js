(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(17),a=t.n(o),i=t(8),s=t(3),u=t(4),d=t.n(u),j=t(0),l=function(e){var n=e.person,t=e.handleRemovePerson;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("li",{children:[n.name," ",n.number,Object(j.jsx)("button",{className:"del_btn",onClick:function(){var e;e=n.name,window.confirm("Want to delete ".concat(e,"?"))&&t(n.id)},children:"Delete"})]})})},b=t(44),h=function(e){var n=e.persons,t=e.handleRemovePerson;return Object(j.jsx)("div",{children:Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)(l,{person:e,handleRemovePerson:t},Object(b.a)())}))})})},f=function(e){var n=e.handleSetSearchString;return Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"text",onChange:function(e){return n(e)}})})},O=function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:function(n){return e.handleSetPersons(n)},children:[Object(j.jsxs)("div",{children:["name:",Object(j.jsx)("input",{type:"text",onChange:function(n){return e.handleSetName(n)},required:!0})]}),Object(j.jsxs)("div",{children:["number:",Object(j.jsx)("input",{type:"text",onChange:function(n){return e.handleSetPhone(n)},required:!0})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.message,t=e.notifClass;return Object(j.jsx)("div",{className:t,children:Object(j.jsx)("p",{children:n})})},p="/api/persons",x=function(){return d.a.get(p)},v=function(e,n){return d.a.put("".concat(p,"/").concat(e),n)},S=function(e){return d.a.delete("".concat(p,"/").concat(e))},g=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),u=a[0],l=a[1],b=Object(c.useState)(""),p=Object(s.a)(b,2),g=p[0],w=p[1],P=Object(c.useState)(""),k=Object(s.a)(P,2),y=k[0],C=k[1],N=Object(c.useState)([]),D=Object(s.a)(N,2),R=D[0],T=D[1],F=Object(c.useState)(""),q=Object(s.a)(F,2),E=q[0],J=q[1],A=Object(c.useState)(""),B=Object(s.a)(A,2),I=B[0],M=B[1];Object(c.useEffect)((function(){x().then((function(e){console.log("promise fulfilled"),r(e.data),T(e.data)}))}),[]);var W=function(e){e.preventDefault();var n=R.filter((function(e){return e.name.includes(u)}));r(n)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),E.length>0?Object(j.jsx)("p",{children:Object(j.jsx)(m,{notifClass:"error",message:E})}):I.length>0?Object(j.jsx)("p",{children:Object(j.jsx)(m,{notifClass:"success",message:I})}):Object(j.jsx)("p",{}),Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),r(R),W(e)}(e)},children:[Object(j.jsx)("p",{children:"Filter shown with"}),Object(j.jsx)(f,{handleSetSearchString:function(e){l(e.target.value)}})]}),Object(j.jsx)("h2",{children:"Add a New "}),Object(j.jsx)(O,{handleSetPersons:function(e){e.preventDefault();var n=t.map((function(e){return e.name}));if(t.map((function(e){return e.number})).includes(y))alert("Phone number ".concat(y," is already added to phone book"));else if(n.includes(g)){if(window.confirm("".concat(g," is already added to phone book, want to replace the old number with the new one?"))){var c=t.find((function(e){return e.name===g})),o=Object(i.a)(Object(i.a)({},c),{},{number:y});v(c.id,o).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e.data})))})).catch((function(e){J("Person '".concat(g,"' was already removed from server")),setTimeout((function(){J("")}),5e3)})),M("'".concat(g,"''s telephone has been changed to ").concat(y)),setTimeout((function(){M("")}),5e3)}}else{var a={name:g,number:y};d.a.post("http://localhost:3007/persons",a).then((function(e){r(t.concat(e.data))})).catch((function(e){J("Person '".concat(g,"' was already removed from server")),setTimeout((function(){J("")}),5e3)})),M("".concat(g,"'s telephone has been added to the phone book")),r(t.filter((function(e){return e.name!==g}))),setTimeout((function(){M("")}),3e3)}},handleSetPhone:function(e){C(e.target.value)},handleSetName:function(e){w(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)("div",{children:Object(j.jsx)(h,{persons:t,handleRemovePerson:function(e){S(e).then((function(){return r(t.filter((function(n){return n.id!==e})))}))}})})]})};t(41);a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.de507566.chunk.js.map